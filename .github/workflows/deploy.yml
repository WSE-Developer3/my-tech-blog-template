name: Deploy

on:
  push:
    branches:
      - master

jobs:
  FTP-Deploy-Action:
    name: FTP-Deploy-Action
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master

      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 14.x

      - name: Install NPM packages
        run: npm ci

      - name: Build Next.js app
        run: npm run build
        env:
          #           URL_PREFIX: myapp
          API_KEY: 6a8ccad3-bfb4-4cbd-85b4-72baff4f550c
          SERVICE_ID: paths-are-template
          ALGOLIA_ADMIN_API_KEY: 587a2807c581950c42e5f5514368fb99
      #           ALGOLIA_SEARCH_CLIENT: 3cdac3eb34cf5bf394e477e1584d8ef8

      - name: List directory
        run: ls

      - name: FTP-Deploy-Action
        uses: SamKirkland/FTP-Deploy-Action@2.0.0
        env:
          FTP_SERVER: ${{ secrets.XSERVER_HOST_NAME }}
          FTP_USERNAME: ${{ secrets.XSERVER_USER_NAME }}
          FTP_PASSWORD: ${{ secrets.XSERVER_PASSWORD }}
          LOCAL_DIR: ./out/
          # REMOTE_DIR: /home/xs282265/paths-are.com/public_html/works.paths-are.com/paths-are-tech-blog-template/
          REMOTE_DIR: /paths-are.com/public_html/works.paths-are.com/paths-are-tech-blog-template/
# on: push
# name: 🚀 Deploy website on push
# jobs:
#   web-deploy:
#     name: 🎉 Deploy
#     runs-on: ubuntu-latest
#     steps:
#       - name: 🚚 Get latest code
#         uses: actions/checkout@v2

#       # - name: Use Node.js 12.13
#       #   uses: actions/setup-node@v1 # Node.jsの環境をセットアップする
#       #   with:
#       #     node-version: "12.13" # v12.13のバージョンのNode環境を使用する

#       # - name: Build Project
#       #   run: |
#       #     npm install                     # npm install のコマンドを実行する
#       #     npm run export   # npm run export のコマンドを実行する
